\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath, amssymb, amsthm}
\usepackage{mathtools}
\usepackage{geometry}
\geometry{margin=0.75in}
\usepackage{hyperref}

\title{Relative-Position Attention via Commuting Skew Generators:\\Compact Axiomatic Proof}
\author{}
\date{}

\newcommand{\Nat}{\mathbb{N}}
\newcommand{\Real}{\mathbb{R}}
\newcommand{\Cplx}{\mathbb{C}}
\newcommand{\eqdef}{\overset{\varnothing}{=}}
\newcommand{\deps}[1]{\quad[\mathrm{deps}:#1]}

\begin{document}

\maketitle

\begin{abstract}
Every claim is a boxed statement with explicit dependency tracking and inline justifications. This proof establishes the relative-position property of structured attention from first principles using commuting skew-symmetric Lie generators.
\end{abstract}

\section*{T0: Foundations}

\subsection*{T0.1--T0.3: Basic Objects}

\[
\boxed{[T0.1:\mathbb{N},\mathrm{Idx}]}\quad
\mathbb{N}\eqdef\{1,2,3,\dots\},\;
d_h,d_c,D\in\mathbb{N},\;
H\eqdef\{1,\dots,d_h\},\;
K\eqdef\{1,\dots,d_c\},\;
J_D\eqdef\{1,\dots,D\}
\deps{\varnothing}
\]

\[
\boxed{[T0.2:I_n,\delta_{ij}]}\quad
\delta_{ij}\eqdef
\begin{cases}
1,& i=j\\
0,& i\neq j
\end{cases}
,\;
I_n\eqdef[\delta_{ij}]_{i,j=1}^n
\deps{T0.1}
\]

\[
\boxed{[T0.3:\mathbb{R}^{m\times n},(\cdot)^\top,(\cdot)^*,\mathrm{tr}]}\quad
\begin{aligned}
&\mathbb{R}^{m\times n}\eqdef\{m\times n\text{ real matrices}\},\;
\mathbb{C}^{m\times n}\eqdef\{m\times n\text{ complex matrices}\},\\
&A^\top\in\mathbb{R}^{n\times m}\;{}^{[;]}_{A\in\mathbb{R}^{m\times n}},\;
B^*\eqdef\overline{B}^\top\;{}^{[;]}_{B\in\mathbb{C}^{m\times n}},\\
&\mathrm{tr}(M)\eqdef\sum_{i=1}^n M_{ii}\;{}^{[;]}_{M\in\mathbb{C}^{n\times n}}
\end{aligned}
\deps{T0.1}
\]

\subsection*{T0.4--T0.5: Determinant Identities}

\[
\boxed{[T0.4:\det]} \quad
\begin{aligned}
&\det:\mathbb{C}^{n\times n}\to\mathbb{C},\;
\det(AB)=\det(A)\det(B),\;
\det(A^\top)=\det(A),\\
&U\text{ inv.}\Rightarrow \det(U A U^{-1})=\det(A)\\
&{}^{[;]}_{\text{mult. of }\det;\ \text{transpose does not change }\det;\ \text{similar matrices have equal }\det}
\end{aligned}
\deps{T0.3}
\]

\[
\boxed{[T0.5:\oplus,\mathrm{blk},\det\oplus]} \quad
\begin{aligned}
&\bigoplus_{u=1}^m M_u\eqdef\mathrm{diag}(M_1,\dots,M_m)\;{}^{[;]}_{\text{block diag}},\\
&\det\Big(\bigoplus_{u=1}^m M_u\Big)=\prod_{u=1}^m \det(M_u)
\;{}^{[;]}_{\text{block triangular }\Rightarrow\text{ det product}}
\end{aligned}
\deps{T0.4}
\]

\subsection*{T0.6--T0.8: Groups and Spectrum}

\[
\boxed{[T0.6:O,SO,U]} \quad
\begin{aligned}
&O(n)\eqdef\{Q\in\mathbb{R}^{n\times n}\mid Q^\top Q=I_n\},\;
SO(n)\eqdef\{Q\in O(n)\mid \det Q=+1\},\\
&U(n)\eqdef\{W\in\mathbb{C}^{n\times n}\mid W^*W=I_n\},\;
Q\in O(n)\Rightarrow Q^{-1}=Q^\top
\end{aligned}
\deps{T0.2,T0.3,T0.4}
\]

\[
\boxed{[T0.7:\det O]} \quad
\begin{aligned}
&Q\in O(n)
\Rightarrow
(\det Q)^2
=\det(Q^\top Q)
=\det(I_n)
=1
\Rightarrow
\det Q\in\{\pm1\}\\
&{}^{[;]}_{T0.6,T0.4}
\end{aligned}
\deps{T0.6,T0.4}
\]

\[
\boxed{[T0.8:\sigma,\sigma_{\min},\text{normal}]} \quad
\begin{aligned}
&\sigma(M)\eqdef\{\lambda\in\mathbb{C}\mid \exists x\neq0: Mx=\lambda x\},\;
M^*M=MM^*\Rightarrow M\text{ normal},\\
&\text{sing.\ vals }s_i(M)\eqdef\sqrt{\sigma_i(M^*M)},\;
\sigma_{\min}(M)\eqdef\min_i s_i(M),\\
&M\text{ normal}
\Rightarrow
s_i(M)=|\lambda_i|\ \text{for }\lambda_i\in\sigma(M)
\;{}^{[;]}_{\text{unitary diag. of normal }M}
\end{aligned}
\deps{T0.3}
\]

\subsection*{T0.9--T0.10: Norms and Commutator}

\[
\boxed{[T0.9:|\cdot|,|\cdot|_1]} \quad
\begin{aligned}
&|x|\eqdef\Big(\sum_{u} x_u^2\Big)^{1/2}\;{}^{[;]}_{x\in\mathbb{R}^m},\;
|x|_1\eqdef\sum_u |x_u|,\\
&|M|\eqdef\sup_{v\neq0}\frac{|Mv|}{|v|}\;{}^{[;]}_{M\in\mathbb{R}^{m\times n}},\;
|AB|\le |A||B|,\;
|A+B|\le |A|+|B|,\\
&|a|\eqdef\text{abs}(a)\;{}^{[;]}_{a\in\mathbb{R}},\;
\text{overload: }|\cdot|\text{ uses arg type (scalar / vec / mat)}
\end{aligned}
\deps{T0.8}
\]

\[
\boxed{[T0.10:[A,B]]} \quad
[A,B]\eqdef AB-BA
\deps{T0.3}
\]

\subsection*{T0.11--T0.13: Matrix Exponential and BCH}

\[
\boxed{[T0.11:\exp,\log,\exp\text{ props}]} \quad
\begin{aligned}
&\exp(M)\eqdef\sum_{t\ge0}\frac{1}{t!}M^t,\;
\log(X)\text{ local}\eqdef\exp^{-1}(X)\text{ near }I_n,\\
&[A,B]=0\Rightarrow \exp(A+B)=\exp(A)\exp(B)\;{}^{[;]}_{T0.10},\\
&(\exp M)^\top=\exp(M^\top),\;
U\text{ inv.}\Rightarrow \exp(UMU^{-1})=U\exp(M)U^{-1},\\
&\det(\exp M)=\exp(\mathrm{tr}\,M),\;
\exp\Big(\bigoplus_{u=1}^m M_u\Big)
=\bigoplus_{u=1}^m \exp(M_u)
\;{}^{[;]}_{\text{power series termwise}}
\end{aligned}
\deps{T0.3,T0.4,T0.5,T0.10}
\]

\[
\boxed{[T0.12:\mathcal{C},O(\cdot),\approx_\varepsilon]} \quad
\begin{aligned}
&\mathcal{C}\eqdef\{C,C',C'',C''',\dots\mid C\ge0\text{ finite const.}\},\\
&f=O(g)\overset{\varnothing}{\Leftrightarrow}\exists C\in\mathcal{C}: f\le C g,\;
X\approx_\varepsilon Y\overset{\varnothing}{\Leftrightarrow}|X-Y|\le\varepsilon
\end{aligned}
\deps{T0.9}
\]

\[
\boxed{[T0.13:\mathrm{BCH}]} \quad
\begin{aligned}
&\exp(M)\exp(N)
=\exp\Big(
M+N+\tfrac12[M,N]+R(M,N)
\Big),\;
|R(M,N)|=O(|[M,N]|^2)\\
&{}^{[;]}_{\text{BCH series local};\ T0.12;\ T0.10;\ T0.11}
\end{aligned}
\deps{T0.11,T0.10,T0.12,T0.9}
\]

\subsection*{T0.14--T0.16: Linear Algebra and Skew Spectral Theory}

\[
\boxed{[T0.14:\ker,\mathrm{im},\mathrm{rank}]} \quad
\ker(M)\eqdef\{x\mid Mx=0\},\;
\mathrm{im}(M)\eqdef\{Mx\mid x\},\;
\mathrm{rank}(M)\eqdef\dim(\mathrm{im}(M))
\deps{T0.3,T0.1}
\]

\[
\boxed{[T0.15:\mathrm{proj}]} \quad
\begin{aligned}
&P^2=P\wedge P^\top=P
\Rightarrow
P\text{ orth.\ proj.},\\
&P,Q\text{ orth.\ proj.}\wedge PQ=0
\Rightarrow
\mathrm{im}(P)\perp\mathrm{im}(Q)\\
&{}^{[;]}_{\mathrm{im}(P)\perp\mathrm{im}(Q)\Leftrightarrow Px\perp Qy\ \forall x,y}
\end{aligned}
\deps{T0.14,T0.3}
\]

\[
\boxed{[T0.16:\mathrm{skew}_\mathrm{spec}]} \quad
\begin{aligned}
&S^\top=-S
\Rightarrow
S\text{ normal}\;{}^{[;]}_{S^*S=SS^*\text{ since }S^*=-S^\top=-S},\\
&\sigma(S)\subset i\mathbb{R}\;{}^{[;]}_{\lambda\in\sigma(S)\Rightarrow \overline{\lambda}\in\sigma(S^\top)=-\sigma(S)},\\
&\lambda=i\mu\in\sigma(S)\Rightarrow -\lambda=-i\mu\in\sigma(S)
\;{}^{[;]}_{\text{conjugate / sign pair}}
\end{aligned}
\deps{T0.3,T0.8}
\]

\subsection*{T0.17--T0.20: Planar Rotations and Technical Lemmas}

\[
\boxed{[T0.17:J,R_2]} \quad
J\eqdef
\begin{bmatrix}
0&-1\\
1&0
\end{bmatrix}
,\;
R_2(\theta)\eqdef\exp(\theta J)
\deps{T0.11}
\]

\[
\boxed{[T0.18:R_2\in SO(2)]} \quad
\begin{aligned}
&R_2(\theta)^\top R_2(\theta)
=\exp(-\theta J)\exp(\theta J)
=\exp(0)
=I_2,\\
&\det R_2(\theta)
=\det(\exp(\theta J))
=\exp(\mathrm{tr}(\theta J))
=\exp(0)
=1
\Rightarrow
R_2(\theta)\in SO(2)\\
&{}^{[;]}_{J^\top=-J\ (T0.16);\ T0.11;\ T0.6;\ T0.4;\ T0.7}
\end{aligned}
\deps{T0.17,T0.16,T0.11,T0.6,T0.4,T0.7}
\]

\[
\boxed{[T0.19:\mathrm{Weyl}]} \quad
\begin{aligned}
&\big|\sigma_{\min}(A+E)-\sigma_{\min}(A)\big|
\le |E|\\
&{}^{[;]}_{\text{Weyl sing.\ val.\ pert.};\ T0.8;\ T0.9}
\end{aligned}
\deps{T0.8,T0.9}
\]

\[
\boxed{[T0.20:(X^{-1})^\top]} \quad
X\text{ inv.}
\Rightarrow
(X^{-1})^\top=(X^\top)^{-1}
\deps{T0.3}
\]

\section*{T1: Commuting Skew Generators}

\[
\boxed{[T1.1:L_k]} \quad
\begin{aligned}
&\forall k\in K:\ L_k\in\mathbb{R}^{d_h\times d_h},\;
L_k^\top=-L_k,\;
[L_a,L_b]=0\\
&{}^{[;]}_{\text{model hyp.};\ T0.1;\ T0.3;\ T0.10;\ T0.16}
\end{aligned}
\deps{T0.1,T0.3,T0.10,T0.16}
\]

\[
\boxed{[T1.2:\mathrm{normal}\ L_k]} \quad
L_k^\top=-L_k
\Rightarrow
L_k\text{ normal}
\;{}^{[;]}_{T0.16}
\deps{T1.1,T0.16}
\]

\[
\boxed{[T1.3:A(r)]} \quad
r\in\mathbb{R}^{d_c}
\Rightarrow
A(r)\eqdef\sum_{k=1}^{d_c} [r]_k L_k
\deps{T1.1,T0.1}
\]

\[
\boxed{[T1.4:A(r)^\top]} \quad
\begin{aligned}
&A(r)^\top
=\sum_k [r]_k L_k^\top
=\sum_k [r]_k(-L_k)
=-A(r)\\
&{}^{[;]}_{T1.3;\ T1.1;\ T0.3}
\end{aligned}
\deps{T1.3,T1.1,T0.3}
\]

\[
\boxed{[T1.5:[A(r),A(s)]]} \quad
\begin{aligned}
&[A(r),A(s)]
=\sum_{a,b}[r]_a[s]_b[L_a,L_b]
=0\\
&{}^{[;]}_{[L_a,L_b]=0\ (T1.1);\ T1.3;\ T0.10}
\end{aligned}
\deps{T1.3,T1.1,T0.10}
\]

\[
\boxed{[T1.6:R_{\mathrm{STR}}]} \quad
R_{\mathrm{STR}}(r)\eqdef\exp(A(r))
\deps{T1.3,T0.11}
\]

\section*{T2: Simultaneous Block Structure}

\subsection*{T2.1--T2.2: Complex Diagonalization and Realification}

\[
\boxed{[T2.1:\mathrm{sim}\text{-}\mathrm{unitary}]} \quad
\begin{aligned}
&\{L_k\}_{k\in K}\text{ commute }\wedge L_k\text{ normal}
\Rightarrow
\exists \mathcal{U}_c\in U(d_h):\\
&\forall k,\;
\mathcal{U}_c^* L_k \mathcal{U}_c
=\mathrm{diag}(i\lambda_{k,1},\dots,i\lambda_{k,d_h}),\;
\lambda_{k,j}\in\mathbb{R}\\
&{}^{[;]}_{\text{commuting normal }\Rightarrow\text{ simultaneously unitarily diagonalizable};\ T1.2;\ T0.6;\ T0.16}
\end{aligned}
\deps{T1.2,T1.1,T0.6,T0.16}
\]

\[
\boxed{[T2.2:\mathrm{real}\ 2\text{D}\ \mathrm{planes}]} \quad
\begin{aligned}
&\text{Fix }j\in H:\
\mathcal{U}_c^*L_k\mathcal{U}_c e_j
=i\lambda_{k,j} e_j
\;{}^{[;]}_{T2.1}\\
&\Rightarrow
L_k(\Re e_j)=\lambda_{k,j} J (\Re e_j,\Im e_j),\;
L_k(\Im e_j)=\lambda_{k,j} J (\Re e_j,\Im e_j)\\
&\Rightarrow
\mathrm{span}\{\Re e_j,\Im e_j\}
\text{ real, }2\text{D},\ L_k\text{-inv.}\\
&{}^{[;]}_{\lambda_{k,j}\in\mathbb{R};\ J:T0.17;\ T0.16}
\end{aligned}
\deps{T2.1,T0.17,T0.16,T0.3}
\]

\subsection*{T2.3--T2.6: Joint Block Diagonalization}

\[
\boxed{[T2.3:\mathrm{JointBlockDiag}]} \quad
\begin{aligned}
&\exists m,d_{\mathrm{null}}\in\mathbb{N}:\ 2m+d_{\mathrm{null}}=d_h,\;
\exists U\in O(d_h):\\
&\forall k,\;
U^\top L_k U
=\Big(\bigoplus_{u=1}^m \lambda_{k,u} J\Big)\oplus 0_{d_{\mathrm{null}}\times d_{\mathrm{null}}}\\
&{}^{[;]}_{\text{collect all nonzero }\lambda_{k,j}\text{ pairs into orthonormal real }2\text{D planes};\ \text{collect common nullspace into }d_{\mathrm{null}}\text{-block};\ T2.2;\ T0.6;\ T0.16}
\end{aligned}
\deps{T2.2,T0.6,T0.16,T0.5}
\]

\[
\boxed{[T2.4:\beta,\theta]} \quad
\beta_u\eqdef(\lambda_{1,u},\dots,\lambda_{d_c,u})^\top\in\mathbb{R}^{d_c},\;
\theta_u(r)\eqdef\beta_u^\top r\in\mathbb{R}
\;{}^{[;]}_{T2.3;\ T1.1;\ T0.1}
\deps{T2.3,T1.1,T0.1}
\]

\[
\boxed{[T2.5:U^\top A(r)U]} \quad
\begin{aligned}
&U^\top A(r) U
=\sum_{k=1}^{d_c}[r]_k(U^\top L_k U)
=\Big(\bigoplus_{u=1}^m \theta_u(r) J\Big)\oplus 0_{d_{\mathrm{null}}\times d_{\mathrm{null}}}\\
&{}^{[;]}_{T1.3;\ T2.3;\ T2.4;\ T0.17;\ T0.5}
\end{aligned}
\deps{T1.3,T2.3,T2.4,T0.17,T0.5}
\]

\[
\boxed{[T2.6:\exp\mathrm{blk}]} \quad
\begin{aligned}
&\exp(U^\top A(r) U)
=\Big(\bigoplus_{u=1}^m R_2(\theta_u(r))\Big)\oplus I_{d_{\mathrm{null}}}\\
&{}^{[;]}_{\exp(\theta J)=R_2(\theta)\ (T0.17);\ \exp(0)=I;\ \exp\text{ blockwise }(T0.11);\ T2.5}
\end{aligned}
\deps{T2.5,T0.17,T0.11,T0.5}
\]

\subsection*{T2.7--T2.11: Structured Rotation Properties}

\[
\boxed{[T2.7:R_{\mathrm{STR}}\text{ form}]} \quad
\begin{aligned}
&R_{\mathrm{STR}}(r)
=\exp(A(r))
=U\Big[\bigoplus_{u=1}^m R_2(\theta_u(r))\oplus I_{d_{\mathrm{null}}}\Big]U^\top\\
&{}^{[;]}_{T1.6;\ T2.6;\ \exp(UMU^{-1})=U\exp(M)U^{-1}\ (T0.11)}
\end{aligned}
\deps{T1.6,T2.6,T0.11,T2.3}
\]

\[
\boxed{[T2.8:R_{\mathrm{STR}}\in SO]} \quad
\begin{aligned}
&R_{\mathrm{STR}}(r)\in SO(d_h)\\
&{}^{[;]}_{R_2(\theta)\in SO(2)\ (T0.18);\ \oplus\text{ det mult. }(T0.5);\ U\in O(d_h)\ (T2.3);\ \det(U)=\pm1\ (T0.7);\ (U^\top)^{-1}=U\ (T0.6);\ T0.4}
\end{aligned}
\deps{T2.7,T0.18,T0.5,T2.3,T0.6,T0.7,T0.4}
\]

\[
\boxed{[T2.9:\mathrm{rel}\ R_{\mathrm{STR}}]} \quad
\begin{aligned}
&R_{\mathrm{STR}}(r_i)^\top R_{\mathrm{STR}}(r_j)
=\exp(A(r_i))^\top \exp(A(r_j))\\
&=\exp(-A(r_i))\exp(A(r_j))
=\exp(A(r_j)-A(r_i))
=R_{\mathrm{STR}}(r_j-r_i)\\
&{}^{[;]}_{A(r)^\top=-A(r)\ (T1.4);\ [A(r),A(s)]=0\ (T1.5);\ (\exp M)^\top=\exp(M^\top)\ (T0.11);\ \exp(A+B)=\exp(A)\exp(B)\ (T0.11)}
\end{aligned}
\deps{T1.4,T1.5,T1.6,T0.11}
\]

\[
\boxed{[T2.10:\Pi_{\mathrm{act}},\Pi_{\mathrm{null}},d_{\mathrm{act}}]} \quad
\begin{aligned}
&\Pi_{\mathrm{act}}\eqdef U\ \mathrm{diag}(I_{2m},0)\ U^\top,\;
\Pi_{\mathrm{null}}\eqdef U\ \mathrm{diag}(0,I_{d_{\mathrm{null}}})\ U^\top,\\
&\Pi_{\mathrm{act}}^\top=\Pi_{\mathrm{act}}\wedge \Pi_{\mathrm{act}}^2=\Pi_{\mathrm{act}},\;
\Pi_{\mathrm{null}}^\top=\Pi_{\mathrm{null}}\wedge \Pi_{\mathrm{null}}^2=\Pi_{\mathrm{null}},\\
&\Pi_{\mathrm{act}}\Pi_{\mathrm{null}}=0
\Rightarrow
\mathrm{im}(\Pi_{\mathrm{act}})\perp\mathrm{im}(\Pi_{\mathrm{null}}),\;
d_{\mathrm{act}}\eqdef\mathrm{rank}(\Pi_{\mathrm{act}})=2m\\
&{}^{[;]}_{T2.3;\ T0.15;\ T0.2;\ T0.14}
\end{aligned}
\deps{T2.3,T0.15,T0.2,T0.14,T0.6}
\]

\[
\boxed{[T2.11:\Pi_{\mathrm{act}}\ \mathrm{comm}]} \quad
\begin{aligned}
&R_{\mathrm{STR}}(r)\Pi_{\mathrm{act}}=\Pi_{\mathrm{act}}R_{\mathrm{STR}}(r)\\
&{}^{[;]}_{T2.7;\ \Pi_{\mathrm{act}}=U\,\mathrm{diag}(I_{2m},0)\,U^\top\ (T2.10);\ R_{\mathrm{STR}}(r)=U[\oplus R_2(\theta_u(r))\oplus I]U^\top\ (T2.7);\ \text{blockwise commute}}
\end{aligned}
\deps{T2.7,T2.10,T0.5,T0.6}
\]

\section*{T3: Cayley Post-Rotation}

\subsection*{T3.1--T3.3: Cayley Transform and Surjectivity}

\[
\boxed{[T3.1:\mathrm{Cayley}]} \quad
\begin{aligned}
&S\in\mathbb{R}^{d_h\times d_h}\wedge S^\top=-S
\Rightarrow
(I+S)\text{ inv.}\;{}^{[;]}_{\sigma(S)\subset i\mathbb{R}\ (T0.16)\Rightarrow 1+i\mu\neq0},\\
&P_{\mathrm{sp}}\eqdef(I-S)(I+S)^{-1},\;
(I-S)(I+S)
=(I+S)(I-S)
=I-S^2
\;{}^{[;]}_{T0.16;\ \text{algebra}}
\end{aligned}
\deps{T0.16,T0.3,T0.2}
\]

\[
\boxed{[T3.2:P_{\mathrm{sp}}\in SO,\mathcal{B}]} \quad
\begin{aligned}
&P_{\mathrm{sp}}^\top
=((I+S)^{-1})^\top (I-S)^\top
=((I+S)^\top)^{-1}(I+S)
\;{}^{[;]}_{S^\top=-S\ (T0.16);\ T0.20}\\
&\Rightarrow
P_{\mathrm{sp}}^\top P_{\mathrm{sp}}=I,\;
\det(P_{\mathrm{sp}})
=\prod_u \frac{1-i\mu_u}{1+i\mu_u}
=+1
\Rightarrow
P_{\mathrm{sp}}\in SO(d_h)\\
&{}^{[;]}_{\mu_u\in\mathbb{R}\ (T0.16);\ T0.7;\ T0.6;\ T0.4;\ T0.11},\\
&\mathcal{B}\eqdef\{(I-S)(I+S)^{-1}\mid S^\top=-S\}
\subseteq SO(d_h)
\end{aligned}
\deps{T3.1,T0.16,T0.20,T0.7,T0.6,T0.4,T0.11}
\]

\[
\boxed{[T3.3:\mathrm{Cayley}\ \mathrm{surj}]} \quad
\begin{aligned}
&Q\in SO(d_h)\wedge (-1\notin\sigma(Q))
\Rightarrow
S_Q\eqdef(I-Q)(I+Q)^{-1}
\text{ well-defined},\\
&S_Q^\top=-S_Q,\;
(I-S_Q)(I+S_Q)^{-1}=Q\\
&{}^{[;]}_{\text{Cayley bijection on }SO(d_h)\text{ with no }-1\text{ eig.};\ T0.16;\ T0.20;\ T0.6;\ T0.4;\ T0.11}
\end{aligned}
\deps{T0.16,T0.20,T0.6,T0.4,T0.11,T0.7}
\]

\subsection*{T3.4--T3.7: Classes and Relative Position}

\[
\boxed{[T3.4:\mathcal{A}]} \quad
\begin{aligned}
&\exists U,m,d_{\mathrm{null}}\text{ as in }T2.3
\Rightarrow
\mathcal{A}\eqdef
\Big\{
U\ \mathrm{diag}(I_{2m},R_{\mathrm{null}})\ U^\top
\ \Big|\
R_{\mathrm{null}}\in SO(d_{\mathrm{null}})
\Big\}\\
&\subseteq SO(d_h),\;
\mathcal{A}\subseteq SO(d_h)\subseteq O(d_h),\\
&R_{\mathrm{null}}\in SO(d_{\mathrm{null}})\wedge(-1\notin\sigma(R_{\mathrm{null}}))
\Rightarrow
U\,\mathrm{diag}(I_{2m},R_{\mathrm{null}})\,U^\top
\in\mathcal{B}\\
&{}^{[;]}_{\det\oplus:\ T0.5;\ R_2\in SO(2):T0.18;\ \text{Cayley surj}:\ T3.3}
\end{aligned}
\deps{T2.3,T0.6,T0.7,T0.5,T0.4,T0.18,T3.3}
\]

\[
\boxed{[T3.5:R_{\mathrm{sp}}]} \quad
\begin{aligned}
&R_{\mathrm{sp}}(r)\eqdef R_{\mathrm{STR}}(r)P_{\mathrm{sp}},\;
R_{\mathrm{STR}}(r)\in SO(d_h)\ (T2.8),\;
P_{\mathrm{sp}}\in SO(d_h)\ (T3.2)\\
&\Rightarrow
R_{\mathrm{sp}}(r)\in SO(d_h)
\;{}^{[;]}_{SO\cdot SO\subseteq SO;\ \det(AB)=\det A\det B\ (T0.4);\ T0.6}
\end{aligned}
\deps{T2.8,T3.2,T0.6,T0.4}
\]

\[
\boxed{[T3.6:\Pi_{\mathrm{act}}\ R_{\mathrm{sp}}\ \Pi_{\mathrm{act}}]} \quad
\begin{aligned}
&P_{\mathrm{sp}}\in\mathcal{A}
\Rightarrow
\Pi_{\mathrm{act}}P_{\mathrm{sp}}=\Pi_{\mathrm{act}}=P_{\mathrm{sp}}\Pi_{\mathrm{act}},\\
&R_{\mathrm{STR}}(r)\Pi_{\mathrm{act}}=\Pi_{\mathrm{act}}R_{\mathrm{STR}}(r)\ (T2.11)
\Rightarrow
\Pi_{\mathrm{act}}R_{\mathrm{sp}}(r)\Pi_{\mathrm{act}}
=\Pi_{\mathrm{act}}R_{\mathrm{STR}}(r)\Pi_{\mathrm{act}}\\
&{}^{[;]}_{R_{\mathrm{sp}}(r)=R_{\mathrm{STR}}(r)P_{\mathrm{sp}}\ (T3.5);\ T2.10;\ T2.11;\ T3.4}
\end{aligned}
\deps{T3.5,T2.10,T2.11,T3.4,T0.5,T0.6}
\]

\[
\boxed{[T3.7:\Pi\text{-}\mathrm{rel}\ R_{\mathrm{sp}}]} \quad
\begin{aligned}
&P_{\mathrm{sp}}\in\mathcal{A}
\Rightarrow
\Pi_{\mathrm{act}}R_{\mathrm{sp}}(r_i)^\top R_{\mathrm{sp}}(r_j)\Pi_{\mathrm{act}}
=\Pi_{\mathrm{act}}R_{\mathrm{STR}}(r_j-r_i)\Pi_{\mathrm{act}}\\
&{}^{[;]}_{R_{\mathrm{sp}}(r)=R_{\mathrm{STR}}(r)P_{\mathrm{sp}}\ (T3.5);\ P_{\mathrm{sp}}^\top=P_{\mathrm{sp}}^{-1}\in SO(d_h)\ (T3.2);\ \Pi_{\mathrm{act}}P_{\mathrm{sp}}=\Pi_{\mathrm{act}}\ (T3.6);\ R_{\mathrm{STR}}\text{ rel }(T2.9)}
\end{aligned}
\deps{T3.6,T2.9,T3.5,T3.2,T2.10,T0.6,T0.4}
\]

\section*{T4: Attention Scores}

\[
\boxed{[T4.1:W,q,k,v]} \quad
\begin{aligned}
&W_Q,W_K,W_V\in\mathbb{R}^{d_h\times D},\;
x_i\in\mathbb{R}^D,\;
r_i\in\mathbb{R}^{d_c},\\
&q_i=W_Q x_i,\;
k_j=W_K x_j,\;
v_j=W_V x_j
\end{aligned}
\deps{T0.1,T0.3}
\]

\[
\boxed{[T4.2:q^{(\mathrm{act})},k^{(\mathrm{act})},d_{\mathrm{act}}]} \quad
\begin{aligned}
&q_i^{(\mathrm{act})}\eqdef\Pi_{\mathrm{act}} q_i,\;
k_j^{(\mathrm{act})}\eqdef\Pi_{\mathrm{act}} k_j,\;
d_{\mathrm{act}}\eqdef 2m,\;
\Pi_{\mathrm{act}}\text{ as in }T2.10\\
&{}^{[;]}_{T2.10}
\end{aligned}
\deps{T2.10,T4.1}
\]

\[
\boxed{[T4.3:\tilde q,\tilde k]} \quad
\begin{aligned}
&\tilde q_i
=\Pi_{\mathrm{act}}R_{\mathrm{sp}}(r_i)q_i^{(\mathrm{act})},\;
\tilde k_j
=\Pi_{\mathrm{act}}R_{\mathrm{sp}}(r_j)k_j^{(\mathrm{act})}\\
&{}^{[;]}_{R_{\mathrm{sp}}(r):T3.5;\ T4.2}
\end{aligned}
\deps{T3.5,T4.2,T2.10}
\]

\[
\boxed{[T4.4:\alpha_{ij}\ \mathrm{def}]} \quad
\begin{aligned}
&\alpha_{ij}
\eqdef
\frac{\tilde q_i^\top \tilde k_j}{\sqrt{d_{\mathrm{act}}}}
=
\frac{1}{\sqrt{d_{\mathrm{act}}}}
(q_i^{(\mathrm{act})})^\top
\big(\Pi_{\mathrm{act}}R_{\mathrm{sp}}(r_i)\Pi_{\mathrm{act}}\big)^\top
\big(\Pi_{\mathrm{act}}R_{\mathrm{sp}}(r_j)\Pi_{\mathrm{act}}\big)
k_j^{(\mathrm{act})}\\
&{}^{[;]}_{\Pi_{\mathrm{act}}^2=\Pi_{\mathrm{act}}=\Pi_{\mathrm{act}}^\top\ (T2.10);\ T4.3;\ T4.2}
\end{aligned}
\deps{T4.3,T4.2,T2.10,T0.3}
\]

\[
\boxed{[T4.5:\alpha_{ij}\ \mathrm{rel}]} \quad
\begin{aligned}
&P_{\mathrm{sp}}\in\mathcal{A}
\Rightarrow
\alpha_{ij}
=\frac{1}{\sqrt{2m}}
(q_i^{(\mathrm{act})})^\top
\Big(\Pi_{\mathrm{act}}R_{\mathrm{STR}}(r_j-r_i)\Pi_{\mathrm{act}}\Big)
k_j^{(\mathrm{act})}\\
&{}^{[;]}_{d_{\mathrm{act}}=2m\ (T4.2);\ \Pi_{\mathrm{act}}R_{\mathrm{sp}}(\cdot)\Pi_{\mathrm{act}}=\Pi_{\mathrm{act}}R_{\mathrm{STR}}(\cdot)\Pi_{\mathrm{act}}\ (T3.6,T3.7);\ T2.9;\ T4.4}
\end{aligned}
\deps{T4.4,T3.6,T3.7,T4.2,T2.9,T2.10,T0.3}
\]

\section*{T5: Robustness}

\subsection*{T5.1--T5.3: Commutator Errors}

\[
\boxed{[T5.1:\varepsilon\text{ comm}]} \quad
\begin{aligned}
&\varepsilon_{ab}\eqdef|[L_a,L_b]|,\;
\varepsilon\eqdef\max_{a,b}\varepsilon_{ab},\\
&|[A(r),A(s)]|
=\Big|
\sum_{a,b}[r]_a[s]_b[L_a,L_b]
\Big|
\le
\sum_{a,b}|[r]_a||[s]_b|\varepsilon_{ab}
\le
|r|_1|s|_1\varepsilon\\
&{}^{[;]}_{T1.3;\ T1.1;\ T0.10;\ T0.9}
\end{aligned}
\deps{T1.3,T1.1,T0.10,T0.9}
\]

\[
\boxed{[T5.2:\mathrm{BCH}\text{ err}]} \quad
\begin{aligned}
&\Big|
\log\Big(\exp(A(r))\exp(A(s))\Big)
-
(A(r)+A(s))
\Big|
\le
\tfrac12|[A(r),A(s)]|
+C|[A(r),A(s)]|^2\\
&{}^{[;]}_{\mathrm{BCH}\ (T0.13);\ T5.1;\ T0.12;\ T0.9;\ \log\text{ local }(T0.11)}
\end{aligned}
\deps{T0.13,T5.1,T0.12,T0.11,T0.9}
\]

\[
\boxed{[T5.3:R_{\mathrm{STR}}\ \mathrm{rel}\ \mathrm{approx}]} \quad
\begin{aligned}
&\Big|
R_{\mathrm{STR}}(r)^\top R_{\mathrm{STR}}(s)
-
R_{\mathrm{STR}}(s-r)
\Big|
\le
C\,\varepsilon\,|r|_1|s|_1
+O(\varepsilon^2)\\
&{}^{[;]}_{\exp(A(r))^\top=\exp(-A(r))\ (T0.11,T1.4);\ R_{\mathrm{STR}}=\exp(A(\cdot))\ (T1.6);\ T5.2;\ T5.1;\ [A(r),A(s)]\ \text{ small}}
\end{aligned}
\deps{T1.6,T1.4,T1.5,T5.2,T5.1,T0.11,T0.12,T0.9}
\]

\subsection*{T5.4--T5.9: Cayley Errors and Block Mixing}

\[
\boxed{[T5.4:S=S_-+E]} \quad
\begin{aligned}
&S=S_-+E,\;
S_-^\top=-S_- ,\;
|E|\le\eta,\;
0\le\eta<1\\
&{}^{[;]}_{\text{decomp. into skew part }S_-\text{ and perturb. }E}
\end{aligned}
\deps{T0.16,T0.9}
\]

\[
\boxed{[T5.5:\sigma_{\min}(I+S_-)]} \quad
\begin{aligned}
&S_-^\top=-S_-
\Rightarrow
\sigma(S_-)\subset i\mathbb{R}\ (T0.16)
\Rightarrow
\forall \lambda=i\mu\in\sigma(S_-):
1+\lambda=1+i\mu\neq0,\\
&|1+i\mu|\ge1
\Rightarrow
\sigma_{\min}(I+S_-)\ge1
\;{}^{[;]}_{T0.16;\ T0.8}
\end{aligned}
\deps{T5.4,T0.16,T0.8}
\]

\[
\boxed{[T5.6:\sigma_{\min}(I+S)]} \quad
\begin{aligned}
&\sigma_{\min}(I+S)
\ge
\sigma_{\min}(I+S_-)-|E|
\ge
1-|E|
\ge
1-\eta
> 0
\Rightarrow
I+S\text{ inv.}\\
&{}^{[;]}_{\text{Weyl }(T0.19);\ T5.4;\ T5.5}
\end{aligned}
\deps{T5.4,T5.5,T0.19,T0.9}
\]

\[
\boxed{[T5.7:\mathrm{Cayley}\ \mathrm{Lip}]} \quad
\begin{aligned}
&P_{\mathrm{sp}}(S)\eqdef(I-S)(I+S)^{-1},\;
P_{\mathrm{sp}}(S_-)\eqdef(I-S_-)(I+S_-)^{-1},\\
&|P_{\mathrm{sp}}(S)-P_{\mathrm{sp}}(S_-)|
\le
C'\eta\\
&{}^{[;]}_{\text{resolvent }(I+S)^{-1}-(I+S_-)^{-1}=(I+S)^{-1}(S-S_-)(I+S_-)^{-1};\ T5.6;\ T0.9;\ T0.20;\ |E|\le\eta\ (T5.4)}
\end{aligned}
\deps{T5.6,T5.4,T0.20,T0.9,T0.12}
\]

\[
\boxed{[T5.8:\eta_{\mathrm{mix}}]} \quad
\begin{aligned}
&P_{\mathrm{sp}}
=U
\begin{bmatrix}
A & B\\
C & D
\end{bmatrix}
U^\top
\;{}^{[;]}_{U\text{ from }T2.3;\ \text{block basis }[\mathrm{act}\oplus\mathrm{null}]},\;
\eta_{\mathrm{mix}}\eqdef|B|+|C|,\\
&P_{\mathrm{sp}}\in SO(d_h)
\Rightarrow
\begin{bmatrix}
A & B\\
C & D
\end{bmatrix}^\top
\begin{bmatrix}
A & B\\
C & D
\end{bmatrix}
=I\\
&\Rightarrow
|A-I_{2m}|
\le
C''\eta_{\mathrm{mix}}
\Rightarrow
|\Pi_{\mathrm{act}}P_{\mathrm{sp}}\Pi_{\mathrm{act}}-\Pi_{\mathrm{act}}|
\le
C''\eta_{\mathrm{mix}}\\
&{}^{[;]}_{P_{\mathrm{sp}}^\top P_{\mathrm{sp}}=I\ (T3.2);\ \Pi_{\mathrm{act}}=U\,\mathrm{diag}(I_{2m},0)\,U^\top\ (T2.10);\ T0.9}
\end{aligned}
\deps{T3.2,T2.3,T2.10,T0.9,T0.6,T0.5,T0.7}
\]

\[
\boxed{[T5.9:\Pi R_{\mathrm{sp}}\Pi\ \mathrm{approx}]} \quad
\begin{aligned}
&\big|
\Pi_{\mathrm{act}}R_{\mathrm{sp}}(r)\Pi_{\mathrm{act}}
-
\Pi_{\mathrm{act}}R_{\mathrm{STR}}(r)\Pi_{\mathrm{act}}
\big|
\le
C''\eta_{\mathrm{mix}}\\
&{}^{[;]}_{R_{\mathrm{sp}}(r)=R_{\mathrm{STR}}(r)P_{\mathrm{sp}}\ (T3.5);\ R_{\mathrm{STR}}(r)\Pi_{\mathrm{act}}=\Pi_{\mathrm{act}}R_{\mathrm{STR}}(r)\ (T2.11);\ T5.8;\ T0.9}
\end{aligned}
\deps{T3.5,T2.11,T5.8,T2.10,T0.9,T0.6}
\]

\subsection*{T5.10: Combined Error Bound}

\[
\boxed{[T5.10:\alpha_{ij}\ \mathrm{stab}]} \quad
\begin{aligned}
&\Delta_{ij}\eqdef
C\Big(\varepsilon |r_i|_1|r_j|_1+\eta_{\mathrm{mix}}\Big)
|q_i^{(\mathrm{act})}|\ |k_j^{(\mathrm{act})}|,\\
&\Big|
\alpha_{ij}
-
\frac{1}{\sqrt{2m}}
(q_i^{(\mathrm{act})})^\top
\Big(\Pi_{\mathrm{act}}R_{\mathrm{STR}}(r_j-r_i)\Pi_{\mathrm{act}}\Big)
k_j^{(\mathrm{act})}
\Big|
\le
\Delta_{ij}\\
&{}^{[;]}_{T4.4;\ T5.9;\ T5.3;\ d_{\mathrm{act}}=2m\ (T4.2);\ T0.12;\ T0.9;\ T5.1}
\end{aligned}
\deps{T4.4,T5.9,T5.3,T4.2,T5.1,T0.12,T0.9,T2.10}
\]

\section*{T6: Main Theorems}

\[
\boxed{[T6.1:\mathrm{GOAL}]} \quad
\begin{aligned}
&\Big(
T1.1\wedge T2.3\wedge P_{\mathrm{sp}}\in\mathcal{A}
\Big)
\Rightarrow
\alpha_{ij}
=
\frac{1}{\sqrt{2m}}
(q_i^{(\mathrm{act})})^\top
\Big(\Pi_{\mathrm{act}}R_{\mathrm{STR}}(r_j-r_i)\Pi_{\mathrm{act}}\Big)
k_j^{(\mathrm{act})}\\
&{}^{[;]}_{T4.5}
\end{aligned}
\deps{T4.5,T3.4,T2.3,T1.1,T2.10}
\]

\[
\boxed{[T6.2:\mathrm{GOAL}_{\mathrm{rob}}]} \quad
\begin{aligned}
&\Big(
|[L_a,L_b]|\le\varepsilon\ \forall a,b\ \text{(T5.1)},\;
P_{\mathrm{sp}}\in SO(d_h)\ \text{ with mixing }\eta_{\mathrm{mix}}\ \text{(T5.8)}
\Big)\\
&\Rightarrow
\alpha_{ij}\approx_{\Delta_{ij}}
\frac{1}{\sqrt{2m}}
(q_i^{(\mathrm{act})})^\top
\Big(\Pi_{\mathrm{act}}R_{\mathrm{STR}}(r_j-r_i)\Pi_{\mathrm{act}}\Big)
k_j^{(\mathrm{act})},\\
&\Delta_{ij}
\le
C\Big(\varepsilon |r_i|_1|r_j|_1+\eta_{\mathrm{mix}}\Big)
|q_i^{(\mathrm{act})}|\ |k_j^{(\mathrm{act})}|\\
&{}^{[;]}_{\approx_{\Delta}:\ T0.12;\ T5.10}
\end{aligned}
\deps{T5.10,T0.12,T5.1,T5.8,T4.2,T2.10}
\]

\section*{Interpretation}

\textbf{T6.1} establishes: Under exact hypotheses (commuting skew generators $\{L_k\}$ satisfying T1.1, joint block diagonalization T2.3, and null-block-only post-rotation $P_{\mathrm{sp}}\in\mathcal{A}$), attention scores depend \emph{only} on the relative position vector $r_j - r_i$.

\textbf{T6.2} establishes: Under approximate hypotheses (small commutator $\varepsilon$ and small block-mixing $\eta_{\mathrm{mix}}$), attention scores are close to the ideal relative form with explicit error bound $\Delta_{ij}$.

The construction realizes RoPE-style relative-position attention as the unique equivariant family arising from commuting skew-symmetric Lie algebras, proven with complete dependency tracking and inline algebraic justifications.

\end{document}
